import{c as _,a as p,f as O}from"./CIHljEz0.js";import{o as Q,a as R}from"./C6XfIMlN.js";import{p as V,a7 as W,f as x,a as X,$ as s,a4 as L,a3 as f,c as N,s as h,b as w,r as B,t as D}from"./DDSqhxMg.js";import{e as Z,d as $}from"./BP9IoZqE.js";import{i as v}from"./Dmn4L8rD.js";import{s as E}from"./DLoLuF_t.js";import{a as ee,C as te}from"./DPKhHaWt.js";import{s as J,c as ae}from"./DzXZMFIV.js";import{p as m,r as oe}from"./CuxZydTE.js";import{r as re,c as ne}from"./DmL5yYJa.js";import{t as ie}from"./CLJs87Zn.js";var se=(P,t,r)=>t()?!1:r(),le=O('<div role="presentation"></div>'),de=O("<div><!> <div><!> <!> <!></div></div>");function we(P,t){V(t,!0);let r=m(t,"trigger",3,"onEntry"),u=m(t,"repeat",3,!0),S=m(t,"backdrop",3,!0),k=m(t,"staticBackdrop",3,!1),M=m(t,"rounded",3,"xl"),j=oe(t,["$$slots","$$events","$$legacy","children","entryContent","exitContent","trigger","repeat","backdrop","staticBackdrop","rounded"]),n=L(!1),l=L(!1);const z=()=>{if(u()===!1){if(localStorage.getItem("entryPopUp"))return;localStorage.setItem("entryPopUp","true")}else if(u()==="page"){let e=JSON.parse(localStorage.getItem("entryPopUp")||"[]");e.includes(window.location.href)||(e.push(window.location.href),localStorage.setItem("entryPopUp",JSON.stringify(e)))}f(n,!0)},g=e=>{const i=e.target;if(e.clientY<50&&e.relatedTarget===null&&(i==null?void 0:i.nodeName.toLowerCase())!=="select"){if(f(n,!1),u()===!1){if(localStorage.getItem("exitPopUp"))return;localStorage.setItem("exitPopUp","true")}else if(u()==="page"){let c=JSON.parse(localStorage.getItem("exitPopUp")||"[]");c.includes(window.location.href)||(c.push(window.location.href),localStorage.setItem("exitPopUp",JSON.stringify(c)))}f(l,!0),document.removeEventListener("mouseout",g)}};Q(()=>{typeof window<"u"&&((r()==="onEntry"||r()==="onEntryExit")&&z(),(r()==="onExit"||r()==="onEntryExit")&&document.addEventListener("mouseout",g))}),R(()=>{typeof window<"u"&&document.removeEventListener("mouseout",g)});let A=e=>{e.code==="Escape"&&(e.preventDefault(),f(n,!1),f(l,!1))},K=()=>{k()===!1&&(f(n,!1),f(l,!1))};var b=_();Z("keydown",W.body,e=>A(e));var T=x(b);{var Y=e=>{var i=de();let c;var C=N(i);{var q=a=>{var o=le();o.__click=[se,k,K],D(d=>J(o,1,d),[()=>ae(ne(S()))]),p(a,o)};v(C,a=>{S()&&(s(n)||s(l))&&a(q)})}var y=h(C,2),I=N(y);E(I,()=>t.children??w);var U=h(I,2);{var F=a=>{var o=_(),d=x(o);E(d,()=>t.entryContent??w),p(a,o)};v(U,a=>{s(n)&&a(F)})}var G=h(U,2);{var H=a=>{var o=_(),d=x(o);E(d,()=>t.exitContent??w),p(a,o)};v(G,a=>{s(l)&&a(H)})}B(y),B(i),D((a,o,d)=>{c=ee(i,c,{...j,class:"theui-popup z-500 fixed inset-0 overflow-y-hidden flex items-center justify-center",role:"dialog","aria-hidden":!s(n)&&!s(l),[te]:a}),J(y,1,`popup-content overflow-y-auto relative ${o??""} ${d??""}`)},[()=>({"entry-popup":r()=="onEntry","exit-popup":r()=="onExit"}),()=>ie("bg-secondary max-w-3xl max-h-screen p-8",t==null?void 0:t.class),()=>re(M())]),p(e,i)};v(T,e=>{(s(n)||s(l))&&e(Y)})}p(P,b),X()}$(["click"]);export{we as P};
